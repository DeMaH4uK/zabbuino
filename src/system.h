#ifndef ZabbuinoSYS_h
#define ZabbuinoSYS_h

#include <Arduino.h>
#include "defaults.h"
#include "../zabbuino.h"
#include "adc.h"


/* ****************************************************************************************************************************
*
*  Read bytes from the MCU signature area to buffer 
*  
**************************************************************************************************************************** */
void getBootSignatureBytes(char* _dst, uint8_t _startByte, uint8_t _len);

/* ****************************************************************************************************************************
*
*  Timer1 initialization 
*
**************************************************************************************************************************** */
uint8_t initTimerOne(const uint16_t _milliseconds);

void stopTimerOne();
void startTimerOne();
ISR(TIMER1_COMPA_vect);

/* ****************************************************************************************************************************
*
*   Gathering internal metrics and save its to global array
*
**************************************************************************************************************************** */
void gatherSystemMetrics();

/* ****************************************************************************************************************************
*
*   Correct sys.vccmin/sys.vccmax metrics when VCC just taken
*
**************************************************************************************************************************** */
void correctVCCMetrics(uint32_t _currVCC);

#endif